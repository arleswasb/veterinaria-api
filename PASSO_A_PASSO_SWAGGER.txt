===============================================
    PASSO A PASSO - LOGIN E USO DO SWAGGER UI
===============================================

ğŸ“‹ GUIA COMPLETO PARA USAR A API COM AUTENTICAÃ‡ÃƒO
VersÃ£o: 1.0 | Data: 01/07/2025

===============================================
ğŸ“Œ PRÃ‰-REQUISITOS
====================================ğŸ” OPÃ‡ÃƒO 1: OAuth2 Direto no Swagger (MAIS FÃCIL)
âœ… Use a janela "Available authorizations"
âœ… Interface simplificada com apenas username e password
âœ… Funciona se o servidor estiver configurado corretamente================
âš ï¸ NOVIDADE - INTERFACE SIMPLIFICADA!
===============================================

ğŸ‰ MUDANÃ‡A IMPORTANTE: Simplificamos a interface de autenticaÃ§Ã£o!

âœ… ANTES: Interface OAuth2 com campos extras
   - username, password, client_id, client_secret...
   - Confusa e difÃ­cil de usar

âœ… AGORA: Interface HTTPBearer simples + Endpoint limpo
   - Endpoint /api/token: apenas username e password
   - Authorize: apenas 1 campo "Value"
   - Muito mais simples!

COMO USAR A NOVA INTERFACE:
1. POST /api/token â†’ Copie o access_token
2. BotÃ£o "Authorize" â†’ Cole no campo "Value"
3. Pronto! Muito mais simples.

Esta mudanÃ§a torna a API muito mais fÃ¡cil de usar! ğŸš€===================

1. âœ… Servidor da API rodando
   - Execute: python -m uvicorn main:app --reload
   - Acesse: http://127.0.0.1:8000

2. âœ… Banco de dados inicializado
   - Execute: python init_db.py
   - Execute: python populate_db.py (para dados de exemplo)

3. âœ… Browser aberto no Swagger UI
   - URL: http://127.0.0.1:8000/docs

===============================================
ğŸš€ PASSO 1: ACESSAR O SWAGGER UI
===============================================

1. Abra seu navegador
2. VÃ¡ para: http://127.0.0.1:8000/docs
3. VocÃª verÃ¡ a interface do Swagger com todos os endpoints

===============================================
ğŸ” PASSO 2: FAZER LOGIN (OBTER TOKEN)
===============================================

MÃ‰TODO A: USANDO USUÃRIOS DE EXEMPLO
------------------------------------
UsuÃ¡rios prÃ©-cadastrados:
â€¢ Username: admin    | Senha: admin123
â€¢ Username: demo     | Senha: demo123

MÃ‰TODO B: REGISTRAR NOVO USUÃRIO
---------------------------------
1. No Swagger, procure a seÃ§Ã£o "ğŸ” AutenticaÃ§Ã£o"
2. Clique em "POST /api/register"
3. Clique em "Try it out"
4. Preencha o JSON:
   {
     "username": "meuusuario",
     "email": "meu@email.com", 
     "password": "minhasenha123"
   }
5. Clique em "Execute"
6. Anote o username criado

PASSO 2.1: OBTER TOKEN JWT
--------------------------
1. No Swagger, procure "POST /api/token"
2. Clique em "Try it out"
3. Preencha os campos necessÃ¡rios:
   âœ… username: admin
   âœ… password: admin123
   
4. Clique em "Execute"
5. Na resposta, COPIE o valor do "access_token"
   Exemplo: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

âœ… INTERFACE SIMPLIFICADA: Agora o endpoint sÃ³ mostra os campos essenciais!

===============================================
ğŸ”‘ PASSO 3: CONFIGURAR AUTENTICAÃ‡ÃƒO NO SWAGGER
===============================================

MÃ‰TODO SIMPLES (2 ETAPAS):

ETAPA 3.1: OBTER TOKEN VIA API
-----------------------------
1. No Swagger, vÃ¡ para "POST /api/token"
2. Clique em "Try it out"
3. Preencha:
   - username: admin
   - password: admin123
4. Clique em "Execute"
5. COPIE todo o access_token da resposta
   (exemplo: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...)

ETAPA 3.2: CONFIGURAR NO BOTÃƒO AUTHORIZE
----------------------------------------
1. Clique no botÃ£o "Authorize" (cadeado verde no topo)
2. Na janela que abrir, vocÃª verÃ¡ apenas um campo:
   
   â”Œâ”€ Available authorizations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                                            â”‚
   â”‚ ğŸ” HTTPBearer (http, bearer)               â”‚
   â”‚                                            â”‚
   â”‚ ğŸ“ Value: [cole seu token aqui]            â”‚
   â”‚                                            â”‚
   â”‚ [Authorize] [Close]                        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. No campo "Value", cole apenas o TOKEN (sem "Bearer"):
   âœ… Exemplo: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   âŒ NÃƒO cole: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

4. Clique em "Authorize"
5. Clique em "Close"

âœ… AGORA vocÃª verÃ¡ cadeados fechados nos endpoints protegidos!

===============================================
ğŸ”§ EXEMPLO VISUAL COMPLETO - JANELA SIMPLES
===============================================

ğŸ‰ NOVA INTERFACE SIMPLIFICADA!

A janela "Available authorizations" agora Ã© muito mais simples:

â”Œâ”€ Available authorizations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                            â”‚
â”‚ ğŸ” HTTPBearer (http, bearer)               â”‚
â”‚                                            â”‚
â”‚ ï¿½ Value: [cole apenas o token aqui]       â”‚
â”‚                                            â”‚
â”‚ [Authorize] [Close]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¯ PASSO A PASSO SUPER SIMPLES:
1. âœ… Obtenha o token via POST /api/token
2. âœ… Clique "Authorize" 
3. âœ… Cole o token no campo "Value"
4. âœ… Clique "Authorize"
5. âœ… Clique "Close"

EXEMPLO PRÃTICO:
Token obtido: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiJ9.xxx
Cole no campo: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiJ9.xxx

âš ï¸ IMPORTANTE: Cole APENAS o token, SEM a palavra "Bearer"!

===============================================
ğŸ¥ PASSO 4: TESTAR ENDPOINTS PROTEGIDOS
===============================================

TESTE 1: VERIFICAR SEU PERFIL
-----------------------------
1. Procure "GET /api/users/me"
2. Clique em "Try it out"
3. Clique em "Execute"
4. VocÃª deve ver seus dados de usuÃ¡rio

TESTE 2: CRIAR UMA CLÃNICA (PROTEGIDO)
--------------------------------------
1. Procure "POST /api/clinicas"
2. Clique em "Try it out"
3. Preencha o JSON:
   {
     "nome": "ClÃ­nica Teste",
     "cidade": "SÃ£o Paulo",
     "endereco": "Rua Teste, 123"
   }
4. Clique em "Execute"
5. Se autenticado, a clÃ­nica serÃ¡ criada

===============================================
ğŸ“Š PASSO 5: USAR OUTROS ENDPOINTS
===============================================

ENDPOINTS PÃšBLICOS (nÃ£o precisam de token):
â€¢ GET /api/clinicas - Listar clÃ­nicas
â€¢ GET /api/veterinarios - Listar veterinÃ¡rios
â€¢ GET /api/pets - Listar pets

ENDPOINTS QUE PODEM PRECISAR DE DADOS:
â€¢ POST /api/veterinarios - Cadastrar veterinÃ¡rio
â€¢ POST /api/tutores - Cadastrar tutor
â€¢ POST /api/pets - Cadastrar pet
â€¢ POST /api/atendimentos - Registrar atendimento

EXEMPLO - CRIAR VETERINÃRIO:
---------------------------
1. Procure "POST /api/veterinarios"
2. Clique em "Try it out"
3. Preencha:
   {
     "nome": "Dr. JoÃ£o Silva",
     "crmv": "SP-12345",
     "email": "joao@teste.com",
     "especialidade": "ClÃ­nica Geral",
     "clinica_id": 1
   }

===============================================
ğŸ› ï¸ SOLUÃ‡ÃƒO DE PROBLEMAS - INTERFACE SIMPLIFICADA
===============================================

PROBLEMA: Interface ainda mostra OAuth2 complexa
SOLUÃ‡ÃƒO: 
â€¢ Pare o servidor (Ctrl+C)
â€¢ Reinicie: python -m uvicorn main:app --reload
â€¢ Recarregue a pÃ¡gina do Swagger
â€¢ Agora deve aparecer a interface simples com apenas 1 campo

PROBLEMA: "Could not validate credentials"
SOLUÃ‡ÃƒO: 
â€¢ Verifique se copiou o token completo (muito longo!)
â€¢ Verifique se nÃ£o incluiu "Bearer " no inÃ­cio
â€¢ Token deve ser apenas: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

PROBLEMA: Token muito longo para copiar
SOLUÃ‡ÃƒO:
â€¢ No resultado do POST /api/token, clique no token
â€¢ Use Ctrl+A para selecionar tudo
â€¢ Ou use Ctrl+C apÃ³s selecionar o texto

PROBLEMA: Cadeados nÃ£o ficam fechados
SOLUÃ‡ÃƒO:
â€¢ Teste GET /api/users/me para confirmar autenticaÃ§Ã£o
â€¢ Se funcionar, os cadeados devem aparecer fechados
â€¢ Recarregue a pÃ¡gina se necessÃ¡rio

PROBLEMA: Interface nÃ£o mudou
SOLUÃ‡ÃƒO:
â€¢ Certifique-se de ter parado e reiniciado o servidor
â€¢ Limpe o cache do browser (Ctrl+F5)
â€¢ Verifique se as mudanÃ§as foram salvas no cÃ³digo

PROBLEMA: "Username jÃ¡ estÃ¡ registrado"
SOLUÃ‡ÃƒO:
â€¢ Use um username diferente
â€¢ Ou faÃ§a login com o usuÃ¡rio existente

PROBLEMA: Endpoint retorna erro 422
SOLUÃ‡ÃƒO:
â€¢ Verifique se todos os campos obrigatÃ³rios estÃ£o preenchidos
â€¢ Verifique o formato dos dados (email vÃ¡lido, etc.)

PROBLEMA: ClÃ­nica nÃ£o existe (ao criar veterinÃ¡rio)
SOLUÃ‡ÃƒO:
â€¢ Primeiro crie uma clÃ­nica
â€¢ Use o ID da clÃ­nica criada no campo clinica_id

===============================================
ğŸ¯ FLUXO COMPLETO DE TESTE - MÃ‰TODO SIMPLIFICADO
===============================================

1. INICIAR SERVIDOR
   python -m uvicorn main:app --reload

2. ABRIR SWAGGER
   http://127.0.0.1:8000/docs

3. OBTER TOKEN
   - VÃ¡ para POST /api/token
   - Try it out
   - username: admin
   - password: admin123
   - Execute
   - COPIE o access_token completo

4. AUTORIZAR NO SWAGGER (NOVA INTERFACE!)
   - Clique no botÃ£o "Authorize" (cadeado verde)
   - Na janela simples que abrir:
   - Cole o token no campo "Value"
   - Clique "Authorize" â†’ "Close"

5. TESTAR AUTENTICAÃ‡ÃƒO
   GET /api/users/me (deve mostrar dados do usuÃ¡rio admin)

6. TESTAR ENDPOINT PROTEGIDO
   POST /api/clinicas (deve permitir criar clÃ­nica)

âœ… VANTAGEM: Interface muito mais simples!
âœ… Apenas 1 campo para preencher (o token)
âœ… Endpoint de login mostra apenas username e password!

===============================================
ğŸ“š INFORMAÃ‡Ã•ES ADICIONAIS
===============================================

â€¢ Token JWT expira em 30 minutos
â€¢ Sempre use o formato: Bearer TOKEN
â€¢ Endpoints protegidos tÃªm Ã­cone de cadeado
â€¢ Swagger UI salva automaticamente a autenticaÃ§Ã£o
â€¢ Para logout, simplesmente feche o browser

DOCUMENTAÃ‡ÃƒO COMPLETA:
â€¢ README.md - Guia geral do projeto
â€¢ AUTHENTICATION.md - Detalhes de autenticaÃ§Ã£o
â€¢ Swagger UI - DocumentaÃ§Ã£o interativa

===============================================
âœ… CHECKLIST DE VERIFICAÃ‡ÃƒO
===============================================

â–¡ Servidor rodando em http://127.0.0.1:8000
â–¡ Swagger acessÃ­vel em /docs
â–¡ Login realizado com sucesso
â–¡ Token copiado e configurado no "Authorize"
â–¡ Endpoint GET /api/users/me funcionando
â–¡ Consegue criar clÃ­nica (endpoint protegido)
â–¡ Endpoints pÃºblicos funcionando normalmente

===============================================
ğŸ‰ PRONTO! VOCÃŠ ESTÃ USANDO A API!
===============================================

Agora vocÃª pode explorar todos os endpoints da API
atravÃ©s da interface amigÃ¡vel do Swagger UI.

Para mais ajuda, consulte:
â€¢ README.md
â€¢ AUTHENTICATION.md  
â€¢ Issues no GitHub

===============================================
âš ï¸ AVISO IMPORTANTE - DUAS OPÃ‡Ã•ES DISPONÃVEIS
===============================================

ï¿½ OPÃ‡ÃƒO 1: OAuth2 Direto no Swagger (MAIS FÃCIL)
âœ… Use a janela "Available authorizations"
âœ… Preencha apenas username e password
âœ… Deixe client_id e client_secret vazios
âœ… Funciona se o servidor estiver configurado corretamente

ğŸ” OPÃ‡ÃƒO 2: Token Manual (SE OPÃ‡ÃƒO 1 FALHAR)
âœ… Use POST /api/token para obter access_token
âœ… Cole manualmente em cada endpoint protegido
âœ… Formato: Authorization: Bearer TOKEN
âœ… Funciona sempre, mesmo com problemas de configuraÃ§Ã£o

RECOMENDAÃ‡ÃƒO: Tente primeiro a OpÃ§Ã£o 1 (mais fÃ¡cil).
Se nÃ£o funcionar, use a OpÃ§Ã£o 2 (mais manual mas sempre funciona).

===============================================
ğŸ“ INFORMAÃ‡Ã•ES ADICIONAIS
===============================================

â€¢ Para mais detalhes sobre autenticaÃ§Ã£o, veja o arquivo AUTHENTICATION.md
â€¢ Qualquer problema, abra uma issue no GitHub
â€¢ ContribuiÃ§Ãµes sÃ£o bem-vindas! Veja o README.md para mais informaÃ§Ãµes

===============================================
ğŸ‰ ATUALIZAÃ‡ÃƒO IMPORTANTE - INTERFACE SIMPLIFICADA
===============================================

âœ… NOVA IMPLEMENTAÃ‡ÃƒO: Endpoint /api/token simplificado!

ğŸ¤” "Ainda vejo campos extras no login?"
âŒ **NÃƒO!** O endpoint agora mostra apenas username e password.

ğŸ¤” "E o que mudou?"
âœ… **Interface limpa!** Apenas os campos essenciais sÃ£o exibidos.

ğŸ¤” "Como faÃ§o login agora?"
ğŸ’¡ Exatamente igual, mas sem confusÃ£o de campos extras.

RESUMO SIMPLES:
â€¢ username: admin âœ…
â€¢ password: admin123 âœ…  
â€¢ SÃ³ isso! Muito mais simples! âœ…

===============================================
ğŸ“ EXEMPLO PRÃTICO NO SWAGGER - VERSÃƒO ATUALIZADA
===============================================

1. VÃ¡ para "POST /api/token"
2. Clique em "Try it out"
3. Preencha (sÃ³ isso!):
   - username: admin
   - password: admin123
4. Clique em "Execute"
5. Copie o access_token da resposta

ğŸ”‘ Agora, configure no Swagger:
1. Clique em "Authorize"
2. No campo "Value", cole o token (sem "Bearer")
3. Clique em "Authorize" e depois em "Close"

âœ… Pronto! Interface muito mais limpa e simples de usar.

===============================================
